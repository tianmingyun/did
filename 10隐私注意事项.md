# DID V1.0核心架构、数据模型和表示法-10

# 10. 隐私注意事项

本部分是非规范性的。

由于 DID 和 DID 文档设计为由 DID 控制器直接管理，因此将隐私设计原则 [[PRIVACY-BY-DESIGN\]](https://www.w3.org/TR/2021/PR-did-core-20210803/#bib-privacy-by-design)应用于去中心化标识符架构的各个方面至关重要。 所有这七个原则都在本规范的整个开发过程中得到应用。 本规范中使用的设计不假定存在注册商、托管公司或其他中间服务提供商来推荐或应用额外的隐私保护措施。 本规范中的隐私是预防性的，而不是补救性的，并且是嵌入式默认设置。 以下部分介绍了实施者在构建使用去中心化标识符的系统时可能会发现有用的隐私注意事项。

## 10.1 保持个人数据的私密性

如果 DID 方法规范是为面向公众的可验证数据注册表编写的，其中相应的 DID 和 DID 文档可能会公开可用，那么这些 DID 文档不包含个人数据至关重要。 个人数据可以通过其他方式传输，例如 1) 可验证凭证[[VC-DATA-MODEL\]](https://www.w3.org/TR/2021/PR-did-core-20210803/#bib-vc-data-model)，或 2) 在 DID 主体或 DID 控制器控制下的服务端点。

预计将围绕服务端点中 URL 的使用进行尽职调查，以防止个人数据泄漏或服务端点 URL 中的相关性。 例如，包含用户名的 URL 包含在 DID 文档中是危险的，因为用户名可能具有人类意义，可能会泄露 DID 主体不同意共享的信息。 使用本规范建议的隐私架构，个人数据可以使用通过 DID 文档中的验证方法识别和保护的通信通道在私有的、对等的基础上进行交换。 这也使 DID 主体和请求方能够实施[GDPR 被遗忘的权利](https://en.wikipedia.org/wiki/General_Data_Protection_Regulation)，因为没有个人数据被写入不可篡改的[分布式账本](https://www.w3.org/TR/2021/PR-did-core-20210803/#dfn-distributed-ledger-technology)。

## 10.2 DID 相关性风险

与任何类型的全局明确标识符一样，DID 之间也可用来关联。 DID 控制器可以通过使用每个关系唯一的成对 DID 来减轻这种隐私风险； 实际上，每个 DID 都充当化名。 一个成对的DID只需要在明确需要相关时，才与一个以上的当事人共享。如果成对的DID是默认的，那么只有在DID控制者和/或DID主体明确希望公开识别和关联时，才需要公开发布DID，或与多方共享。

## 10.3 DID 文档相关性风险

如果相应 DID 文档中的数据可以关联，则成对 DID 的反相关保护很容易被破坏。 例如，在多个 DID 文档中使用相同的验证方法或定制服务端点可以提供与使用相同 DID 一样多的相关信息。 因此，成对 DID的DID文档也需要使用成对的唯一的信息，比如保证成对关系的验证方法是唯一的。

在DID文件中也使用成对的唯一服务端点，对于成对的DID来说似乎很自然。然而，唯一的端点允许两个DID之间的所有流量被完美地隔离到唯一的存储桶中，在那里时间相关性和类似的分析很容易。因此，一个更好的端点隐私策略可能是在由许多不同主体控制的大量DID之间共享一个端点（请参阅第 10.5 节“群体隐私”）。

## 10.4 DID主体分类

向 DID 文档添加可用于显式或通过推断指示 DID 主体是什么类型或性质的属性是危险的，特别是如果 DID 主体是人。

此类属性不仅可能导致 DID 文档中出现个人数据（参见第10.1 “保持个人数据隐私”）或关联数据（参见 第10.2 ”DID 相关性风险“和 第 10.3 ”DID 文档相关风险“），而且它们可用于将特定的 DID 分组，使其包含在某些操作或功能中或排除在某些操作或功能之外。

在 DID 文档中包含类型信息可能会导致个人隐私受损，即使对于非个人实体的 DID 主体（例如物联网设备）也是如此。围绕 DID 控制器的此类信息的汇总可以作为一种数字指纹的形式，这一点最好避免。

为了最大限度地降低这些风险，DID 文档中的所有属性都应该用于表示与使用 DID 相关的加密材料、端点或验证方法。

## 10.5 群体隐私

当 DID 主体与群体中的其他主体无法区分时，隐私是可用的。 当与另一方私下交往的行为本身就是一个可识别的标记（flag）时，隐私就会大大减少。

DID 和 DID 方法需要努力改善群体隐私，特别是对于那些合法最需要它的人。 可以选择默认保留匿名和假名的技术和人机界面。 为了减少[数字指纹](https://en.wikipedia.org/wiki/Device_fingerprint)，在请求方的实施中共享共同的设置，将线协议（wire protocols）上的协商选项保持在最低限度，使用加密传输层，并将消息填充到标准长度。

## 10.6 服务隐私

控制者能够在 DID 文档中选择性地表达至少一个服务端点，这增加了他们的控制和代理。DID文件中的每一个额外的端点都会增加隐私风险，其原因是相关性，如跨端点描述，或因为服务没有受到授权机制的保护，或两者都是。

DID文件通常是公开的，而且由于它们是标准化的，将因其基于标准的性质而被有效地存储和索引。如果DID文件被发布到不可改变的可验证的数据注册处，这种风险就更大了。对DID所引用的DID文件历史的访问，代表了一种通过使用标准而变得更加有效的流量分析形式。

在一个DID文件中使用多个服务端点所引起的额外隐私风险的程度可能难以估计。隐私伤害通常是意外的后果。DID可以指代可能与个人、家庭、俱乐部和雇主有关的文件、服务、模式和其他东西——其服务端点的相关性可能成为强大的监视和推理工具。这种潜在危害的一个例子可以看出，当多个共同的国家层面的顶级域名（如https://example.co.uk）可能被用来推断DID主体的大致位置，而且概率较大。

**维护群体隐私**

可能的端点的多样性使得维护群组隐私特别具有挑战性，在这种情况下，关于DID主体的信息不会被泄露（见10.5节”群组隐私“）。

首先，由于服务端点可能被指定为URI，它们可能因为服务的结构而无意中泄露个人信息。例如，http://example.com/MyFirstName 的服务端点向每个可以访问 DID 文档的人泄露了 MyFirstName 这个术语。当链接到遗留系统时，这是一个不可避免的风险，在这种情况下，希望大家能谨慎对待。本规范鼓励新的、具有DID意识的端点在任何必要的识别中只使用DID本身。例如，如果一个服务描述包括http://example.com/did%3Aexample%3Aabc123，不会有什么危害，因为did:example:abc123已经在DID文档中暴露出来了；它不会泄露额外的信息。

其次，由于DID文件可以列出多个服务端点，因此有可能不可逆转地关联在任何其他情况下都没有关联的服务。这种关联本身就可能导致隐私伤害，因为它暴露了DID主体的信息，即使使用的URI不包含任何敏感信息。

第三，由于某些类型的DID主体可能更多或更少地列出特定的终端，列出一个特定的服务本身就可能泄露信息，而这些信息可以用来推断出DID主体的一些情况。例如，一辆汽车的DID可能包括一个指向机动车管理局的公共产权记录的指针，而个人的DID则不包括这一信息。

群体隐私的目标是确保特定 DID 受试者的性质被整体人口所掩盖。为了最大限度地提高群体隐私，实施者需要依赖一个——而且只有一个——服务端点，该端点提供控制器愿意依赖的代理或中介服务，以保护此类关联并屏蔽对最终服务的请求。

**服务端点替代方案**

鉴于上一节中的担忧，敦促实施者考虑以下任何服务端点方法：

- 协商者端点——协商双方同意的通信渠道的服务，最好使用私有集合交集。 协商的输出是一个通信通道以及访问它可能需要的任何凭据。
- Tor 端点（Tor Onion 路由器）— 提供尊重隐私的地址以访问服务端点。 任何可以在线提供的服务都可以通过 TOR 提供，以获得额外的隐私。
- 中介端点——中介为多方提供一个通用端点，代表这些方接收加密消息，并将它们转发给预期的接收者。 这避免了每个受试者需要有一个特定的端点，这可能会产生相关风险。 这种方法也称为代理。
- 机密存储——专有或机密的个人信息可能需要远离可验证的数据注册表，以提供额外的隐私和/或安全保证，特别是对于那些在公共分类账上发布 DID 文档的 DID 方法。 指向外部资源服务提供了一种授权检查和删除的方法。
- 多态代理——一个代理端点，可以充当任意数量的服务，具体取决于它的调用方式。 例如，相同的 URL 可以用于协商器和调解器功能，这取决于重新路由的机制。

这些服务端点类型仍然是一个创新和探索的领域。